<!DOCTYPE html>
<html class="dfTheme">

<head>
	<title>DFPOM - Dwarf Fortress Production Orders Manager </title>
</head>


<head>
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
	<link rel="stylesheet" href="style.css">
	<script src="node_modules/fuse.js/dist/fuse.js"></script>
	<script src="df-pom-ordersdata.js"></script>
	<script src="df-pom-smeltingOrders.js"></script>
	<script src="df-pom.js"></script>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body oncontextmenu="OnRightClickOrEscape()">
	<div class="traces">
		<button id="hideLogs" class="anchor" onclick="ToggleOption('HideLogs')" title="Toggle log visibility">
			<span class="ico"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
					<path d="M480-200q66 0 113-47t47-113v-160q0-66-47-113t-113-47q-66 0-113 47t-47 113v160q0 66 47 113t113 47Zm-80-120h160v-80H400v80Zm0-160h160v-80H400v80Zm80 40Zm0 320q-65 0-120.5-32T272-240H160v-80h84q-3-20-3.5-40t-.5-40h-80v-80h80q0-20 .5-40t3.5-40h-84v-80h112q14-23 31.5-43t40.5-35l-64-66 56-56 86 86q28-9 57-9t57 9l88-86 56 56-66 66q23 15 41.5 34.5T688-640h112v80h-84q3 20 3.5 40t.5 40h80v80h-80q0 20-.5 40t-3.5 40h84v80H688q-32 56-87.5 88T480-120Z" />
				</svg>
			</span>
			<span class="keyInfo">L</span>
		</button>
	</div>

	<div class="mainFlexHost">
		<div class="flexHostBackdrop"></div>

		<div class="mainToolbar">

			<div class="menu">
				<div class="toolbarLine"></div>

				<div class="tools">
					<button id="readOrders" onclick="QueueOrdersRead(true,true)" title="Read production orders">
						<span class='ico'>‚Øà</span>
						<span class='txt'>READ<br>ORDERS</span>
						<span class="keyInfo">R</span>
					</button>
					<button id="autoReadOrders" onclick="ToggleOption('AutoReadOrders')" title="Toggle automatic reading of production orders">
						<span class='ico'><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M204-318q-22-38-33-78t-11-82q0-134 93-228t227-94h7l-64-64 56-56 160 160-160 160-56-56 64-64h-7q-100 0-170 70.5T240-478q0 26 6 51t18 49l-60 60ZM481-40 321-200l160-160 56 56-64 64h7q100 0 170-70.5T720-482q0-26-6-51t-18-49l60-60q22 38 33 78t11 82q0 134-93 228t-227 94h-7l64 64-56 56Z" />
							</svg></span>
						<span class="keyInfo">^R</span>
					</button>

					<div class="sep"> </div>

					<button id="readStocks" onclick="QueueStocksRead(true,true)" title="Read stocks">
						<span class='ico'>‚Øà</span>
						<span class='txt'>READ<br>STOCKS</span>
						<span class="keyInfo">T</span>
					</button>
					<button id="autoReadStocks" onclick="ToggleOption('AutoReadStocks')" title="Toggle automatic reading of stocks">
						<span class='ico'><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M204-318q-22-38-33-78t-11-82q0-134 93-228t227-94h7l-64-64 56-56 160 160-160 160-56-56 64-64h-7q-100 0-170 70.5T240-478q0 26 6 51t18 49l-60 60ZM481-40 321-200l160-160 56 56-64 64h7q100 0 170-70.5T720-482q0-26-6-51t-18-49l60-60q22 38 33 78t11 82q0 134-93 228t-227 94h-7l64 64-56 56Z" />
							</svg></span>
						<span class="keyInfo">^T</span>
					</button>

					<div class="sep"> </div>

					<button id="saveOrders" onclick="QueueOrdersSave(true,true)" title="Apply production orders changes to Dwarf Fortress">
						<span class='ico'>üñ´</span>
						<span class='txt'>APPLY<br>CHANGES</span>
						<span class="keyInfo">S</span>
					</button>

					<button id="autoSaveOrders" onclick="ToggleOption('AutoSaveOrders')" title="Toggle automatic saving of production orders">
						<span class="ico">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M204-318q-22-38-33-78t-11-82q0-134 93-228t227-94h7l-64-64 56-56 160 160-160 160-56-56 64-64h-7q-100 0-170 70.5T240-478q0 26 6 51t18 49l-60 60ZM481-40 321-200l160-160 56 56-64 64h7q100 0 170-70.5T720-482q0-26-6-51t-18-49l60-60q22 38 33 78t11 82q0 134-93 228t-227 94h-7l64 64-56 56Z" />
							</svg></span>
						<span class="keyInfo">^S</span>
					</button>

					<div class="sep"> </div>


					<button id="addOrder" onclick="EditOrder(CreateNewOrder())" title="Add a new production order">
						<span class="ico"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
							</svg>
						</span>
						<span class="keyInfo">ENTER</span>
					</button>

					<button id="cancelOrders" onclick="CancelOrderChanges()" title="Cancel all unsaved changes to production orders">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448ZM480-480Z" />
							</svg>
						</span>
						<span class="keyInfo">Z</span>
					</button>

					<button id="pauseAll" onclick="PauseAllTasks()" title="Pause/Unpause all production orders">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M360-320h80v-320h-80v320Zm160 0h80v-320h-80v320ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
							</svg>
						</span>
						<span class="keyInfo">a</span>
					</button>

					<button id="cleanUpOrders" onclick="CleanupDuplicateOrders()" title="Merge duplicate orders">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="m840-234-80-80v-326H560v-200H320v86l-80-80v-6q0-33 23.5-56.5T320-920h280l240 240v446Zm-520-46h248L320-528v248ZM820-28 648-200H320q-33 0-56.5-23.5T240-280v-328L28-820l56-56L876-84l-56 56ZM540-577Zm-96 173ZM160-40q-33 0-56.5-23.5T80-120v-520h80v520h480v80H160Z" />
							</svg>
						</span>
						<span class="keyInfo">f</span>
					</button>

					<div class="sep"> </div>

					<button id="extraCols" onclick="ToggleOption('LessColumns')" title="Show/hide extra columns">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h160v-480H160v480Zm240 0h160v-480H400v480Zm240 0h160v-480H640v480Zm-240 0v-480 480Z" />
							</svg>
						</span>
						<span class="keyInfo">w</span>
					</button>

					<button id="toggleStockSorting" onclick="ToggleGrouping()" title="Toggle item grouping by type">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M120-240v-80h240v80H120Zm0-200v-80h480v80H120Zm0-200v-80h720v80H120Z" />
							</svg>
						</span>
						<span class="keyInfo">g</span>
					</button>

					<button id="toggleHideMissingItems" onclick="ToggleMissingItems()" title="Toggle show items not in stock">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M450-81q-78-6-145.5-39T187-206.5q-50-53.5-78.5-124T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480v19q-17-11-39.5-21.5T799-500q-8-126-99.5-213T480-800q-56 0-105.5 18T284-732l245 245q-19 8-36.5 18.5T458-446L228-676q-32 41-50 90.5T160-480q0 99 53.5 177.5T352-187q18 28 45 57t53 49Zm230-79q59 0 109.5-27t80.5-73q-30-46-80.5-73T680-360q-59 0-109.5 27T490-260q30 46 80.5 73T680-160Zm0 80q-96 0-171.5-50.5T400-260q33-79 108.5-129.5T680-440q96 0 171.5 50.5T960-260q-33 79-108.5 129.5T680-80Zm0-120q-25 0-42.5-17.5T620-260q0-25 17.5-42.5T680-320q25 0 42.5 17.5T740-260q0 25-17.5 42.5T680-200Z" />
							</svg>
						</span>
						<span class="keyInfo">e</span>
					</button>

					<div class="sep"> </div>

					<div class="help">
						<span>?</span>
						<div class="infos">
							<div><b>Hover</b> mouse on buttons for info</div>
							<div><b>Right click to close menus / clear filters</b></div>
							<div>Use CTRL or SHIFT to use <b>shortcuts keys</b></div>
							<div>Use CTRL+SHIFT for shortcuts keys marked with ^</div>
							<div>All numbers input can be controlled with mouse wheel, hold control for faster changes
							</div>
							<div>To <b>filter</b> a table, just <b>start typing from anywhere</b>, no need to click the field first
							</div>
						</div>
					</div>
				</div>

				<div class="tabs">
					<button id="tabOrdersButton" onclick="SetTab('orders')">
						<span class="ico"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M280-600v-80h560v80H280Zm0 160v-80h560v80H280Zm0 160v-80h560v80H280ZM160-600q-17 0-28.5-11.5T120-640q0-17 11.5-28.5T160-680q17 0 28.5 11.5T200-640q0 17-11.5 28.5T160-600Zm0 160q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520q17 0 28.5 11.5T200-480q0 17-11.5 28.5T160-440Zm0 160q-17 0-28.5-11.5T120-320q0-17 11.5-28.5T160-360q17 0 28.5 11.5T200-320q0 17-11.5 28.5T160-280Z" />
							</svg></span>
						<span class="txt">ORDERS</span>
						<span class="keyInfo">1</span>
						<div class="over"></div>
					</button>
					<div class="sep"> </div>
					<button id="tabInventoryButton" onclick="SetTab('inventory')">
						<span class="ico"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h133v-133H200v133Zm213 0h134v-133H413v133Zm214 0h133v-133H627v133ZM200-413h133v-134H200v134Zm213 0h134v-134H413v134Zm214 0h133v-134H627v134ZM200-627h133v-133H200v133Zm213 0h134v-133H413v133Zm214 0h133v-133H627v133Z" />
							</svg></span>
						<span class="txt">STOCKS</span>
						<span class="keyInfo">2</span>
						<div class="over"></div>
					</button>
					<div class="sep"> </div>
					<button id="tabSmeltingButton" onclick="SetTab('smelting')">
						<span class="ico"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M240-400q0 52 21 98.5t60 81.5q-1-5-1-9v-9q0-32 12-60t35-51l113-111 113 111q23 23 35 51t12 60v9q0 4-1 9 39-35 60-81.5t21-98.5q0-50-18.5-94.5T648-574q-20 13-42 19.5t-45 6.5q-62 0-107.5-41T401-690q-39 33-69 68.5t-50.5 72Q261-513 250.5-475T240-400Zm240 52-57 56q-11 11-17 25t-6 29q0 32 23.5 55t56.5 23q33 0 56.5-23t23.5-55q0-16-6-29.5T537-292l-57-56Zm0-492v132q0 34 23.5 57t57.5 23q18 0 33.5-7.5T622-658l18-22q74 42 117 117t43 163q0 134-93 227T480-80q-134 0-227-93t-93-227q0-129 86.5-245T480-840Z" />
							</svg></span>
						<span class="txt">SMELTING</span>
						<span class="keyInfo">3</span>
						<div class="over"></div>
					</button>
					<div class="sep"> </div>
					<button id="tabGraphs" onclick="SetTab('graphs')">
						<span class="ico"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M320-414v-306h120v306l-60-56-60 56Zm200 60v-526h120v406L520-354ZM120-216v-344h120v224L120-216Zm0 98 258-258 142 122 224-224h-64v-80h200v200h-80v-64L524-146 382-268 232-118H120Z" />
							</svg></span>
						<span class="txt">GRAPHS</span>
						<span class="keyInfo">4</span>
						<div class="over"></div>
					</button>
					<div class="sep"> </div>
					<button id="tabSettings" onclick="SetTab('settings')">
						<span class="ico"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z" />
							</svg></span>
						<span class="txt">SETTINGS</span>
						<span class="keyInfo">5</span>
						<div class="over"></div>
					</button>
				</div>


			</div>
		</div>

		<div class="searchbar"> <input id="generalFilter" class='autofocus' onkeyup="FilterChanged(this.value)" onchange="FilterChanged(this.value)" placeholder="..." />
			<span class="ico">
				<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
					<path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z" />
				</svg>
			</span>
		</div>

		<div class='tabsHost'>
			<div class="toasts">
				<!--
				<button class='anchor'>
					<span class="ico">
						<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
							<path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
						</svg>
					</span>
				</button>
				-->
			</div>

			<div class='ordersTab hozScroll'>
				<div class="ordersTable">
					<div class="help">
						<span>?</span>
						<div class="infos">
							<div>SHIFT/CTRL+ENTER to <b>add an order</b></div>
							<div><b>Type</b> from anywhere to <b>filter</b> orders</div>
							<div><b>To add a graph</b> click on the right side of a item/material cell, the graph will be displayed in the Graphs tab</div>
							<div>If a filter is set, <b>creating an order will use the active filter</b> to select the job.<br>
								Use this for quick order creation:<br>
								"BED + (SHIFT+ENTER x2)" = single-time order of beds.<br>
								"DEN BARREL + (CTRL+ENTER x2) = conditional order of <i>woo</i>den barrels.</div>
							<div><b>Drag & drop</b> orders to change their <b>priority</b></div>
							<div>Click an order to edit it</div>
							<div><b>Drag & drop</b> orders to change their <b>priority</b></div>
							<div>Orders with markers (‚úé, ‚úñ, ‚úö) are not yet sent to the game. <b>CTRL+S to apply changes</b></div>
							<div>Hover an order to see action buttons</div>
							<div>Use mouse wheel to change target batch quantity / batch quantity left to do</div>
							<div>"1c", "2c"... indicates the number of conditions for that order.</div>
							<div>Hover conditions cell to edit condition numbers, and copy/paste conditions</div>
							<div>Dark orders have not yet been validated by the manager</div>
							<div>Lighter orders are active orders</div>
							<div><b>Right-click</b> to <b>clear the filter</b></div>
						</div>
					</div>
				</div>
			</div>

			<div class="inventoryTab">
				<div class="inventoryContent" onmouseup="event.stopPropagation();">
					<div class="corner">
						<div class='help'>
							<span>?</span>
							<div class="infos">
								<div>Use this table to <b>set stocks targets</b>. Productions orders will be generated accordingly.</div>
								<div>Use the mouse wheel to quickly change values (hold CTRL for larger steps)</div>
								<div>Use the corner button 'Select Materials' to toggle materials columns.</div>
								<div>Use the star to pin <b>favorite items</b> at the top of the list</div>
								<div>Use the <b>toolbar buttons</b> to show/hide missing items and toggle category grouping </div>
								<div>You can type more than one names in the search bar to show a set of items (ex: "table chair")</div>
								<div><b>Non-empty Container items</b> (barrels, buckets, ...) are <b>not accounted</b> for stocks</div>
								<div><b>Type</b> from anywhere to <b>filter</b> inventory</div>
								<div><b>Right-click</b> to <b>clear the filter</b></div>
							</div>
						</div>
						<div class="gameButton selectMatsButton" onclick="OpenMaterialsPicker()">Select materials ‚ñ•
							<span class="keyInfo">q</span>
						</div>
					</div>
					<div class="inventoryTableHeader"></div>
					<div class="inventoryTable">
						<div class="inventoryBody">
							<div class="itemsSide"></div>
							<div class="valuesSide"></div>
						</div>
					</div>
				</div>

			</div>

			<div class="smeltingTab">
				<div class="oreSmelting" onmouseup="event.stopPropagation();">
					<div class="title">Ore smelting</div>
					<div class="content">
					</div>
				</div>
				<div class="alloySmelting" onmouseup="event.stopPropagation();">
					<div class="title">Alloy making</div>
					<div class="content">
					</div>
				</div>
			</div>

			<div class="graphsTab">
				<div class="graphsSpan" onmouseup="event.stopPropagation();">
					<div class="top">
						<label> Span <input type="number" id="config_graphsSpan" onchange="SaveSetting('graphsSpan',this.value)" title="Points displayed" />
						</label>
						<div class="help">
							<span>?</span>
							<div class="infos rightSide">
								<div><b>To add a graph</b> click on the right side of a Stock tabs cell</div>
								<div>Click the graph name to <b>find</b> orders/stocks associated with it</div>
								<div>CTRL/SHIFT+Click to <b>remove</b> the graph</div>
								<div>Change the <b>graph scale</b> by setting the max value in the top right corner</div>
								<div>Set the scale value to -1 for automatic scaling</div>
								<div>Dashed lines indicates that the graph values goes beyond the max value</div>
								<div>Change the graphs size and other parameters in the settings tab</div>
							</div>
						</div>
					</div>
					<span class='spanTotal'>x days</span>
				</div>
				<div class="graphsContent" onmouseup="event.stopPropagation();">
				</div>
			</div>


			<div class="settingsTab">
				<div class="settingsContent" onmouseup="event.stopPropagation();">
					<h2>General</h2>
					<div class="setting">
						<p>Update on start</p>
						<div>
							<input type="checkbox" id="config_autoUpdate" onchange="SaveSetting('autoUpdate',this.checked)" />
							<span>Check for updates automatically when the app starts</span>
						</div>
					</div>
					<div class="setting">
						<p>Change DF path</p>
						<div>
							<button onclick="ResetPath()">Set DF Path</button>
							<span>Must point to where Dwarf Fortress + DF Hack are installed</span>
						</div>
					</div>
					<h2>Orders</h2>
					<div class="setting">
						<p>Batch Size</p>
						<div>
							<input type="number" id="config_orderBatchSize" onchange="SaveSetting('orderBatchSize',this.value)" />
							<span>Number of items to produce every time the order conditions are met</span>
						</div>
					</div>
					<h2>Graphs</h2>
					<div class="setting">
						<p>Graph Default Max Value</p>
						<div>
							<input type="number" id="config_defaultGraphMax" onchange="SaveSetting('defaultGraphMax',this.value)" />
							<span>Default max value for Y axis of graphs stocks</span>
						</div>
					</div>
					<div class="setting">
						<p>Graph Rate</p>
						<div>
							<input type="number" id="config_graphsRate" onchange="SaveSetting('graphsRate',this.value)" />
							<span>Ticks to wait between graph updates (1200 ticks = 1 day)</span>
						</div>
					</div>
					<div class="setting">
						<p>Graph Height</p>
						<div>
							<input type="number" id="config_graphsHeight" onchange="SaveSetting('graphsHeight',this.value)" />
							<span>Height of graphs (pixels)</span>
						</div>
					</div>
					<div class="setting">
						<p>Graph Auto Height</p>
						<div>
							<input type="checkbox" id="config_graphsDefaultAutoHeight" onchange="SaveSetting('graphsDefaultAutoHeight',this.checked)" />
							<span>Set the default height of new graphs to '-1' : Automatic scale based on the highest value</span>
						</div>
					</div>
					<div class="setting">
						<p>Graph Width</p>
						<div>
							<input type="number" id="config_graphsWidth" onchange="SaveSetting('graphsWidth',this.value)" />
							<span>Width of graphs (pixels)</span>
						</div>
					</div>
					<div class="setting">
						<p>Red background when low</p>
						<div>
							<input type="checkbox" id="config_graphsRedBackground" onchange="SaveSetting('graphsRedBackground',this.checked)" />
							<span>Use a fading red background when the last of a graph is below 40%</span>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>


	<div class="selectors">
		<div class="inventoryMaterialsPickerHost hidden" onclick="CloseMaterialsPicker()">
			<div class='bg'> </div>
			<div class="inventoryMaterialsPicker" onclick="event.stopPropagation();">
				<div class='filter'>
					<div class='help'>
						<span>?</span>
						<div class="infos">
							<div>Use ENTER to toggle the first filtered material</div>
							<div>Use SHIFT+ENTER to toggle all filtered materials (max 20)</div>
							<div>You can filter with <b>generic keywords</b>: 'metal', 'stone', 'wood'... </div>
							<div><b>CTRL+X to remove all</b> selected materials</div>
							<div><b>Right-click to close</b></div>
						</div>
					</div>

					<input class='autofocus' id="inventoryMaterialsFilter" placeholder="Filter..." type="text" onclick="this.value='';InventoryMaterialsFilterChanged('')" onfocus="this.value='';InventoryMaterialsFilterChanged('')" onchange="InventoryMaterialsFilterChanged(this.value)" onkeyup="InventoryMaterialsFilterChanged(this.value)" />
					<button onclick="ClearStocksMaterialsFilter()" title="Clear selected materials">
						<span class="icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z" />
							</svg>
						</span>
						<span class="keyInfo">X</span>
					</button>
				</div>
				<div class='materialsList hozScroll'></div>
			</div>
		</div>

		<div class="orderEditor hidden" onmouseup="event.stopPropagation();">
			<div class="background"></div>
			<div class='window'>
				<h3>Production Order</h3>
				<div class='inputs'>
					<label for="jobName"> <span>Job name</span> <input forcePick="true" onchange="OrderEdited('job')" type="text" id="jobName" onfocus="SetAutoFill(this,jobSortedNames)" pickOnBlur="1" onblur="CloseAutoFill(this)" />
						<div class="autocompleteList"></div>
					</label>
					<label for="itemQtt"> <span>One-time quantity</span> <input onchange="OrderEdited('qtt')" type="number" id="itemQtt" value="10" pickOnBlur="1" />
					</label>
				</div>
				<div class='condCoderTitle'>Repeat conditions</div>
				<div class="conditionCoder">
					<div class="inp">
						<textarea id="conditionCode" onfocus="ConditionCoderFocused()" onchange="OrderEdited('cond')" onkeyup="OrderEdited('cond')" placeholder=":emp :food barrel !chestnut <=10" onfocus="this.select()">10</textarea>
					</div>
					<div class="int">
						<div class="interpretedConditions">Empty Food-containing Chestnut Barrel, &lt;= 10</div>
					</div>
					<div class="out">
						<div class="outputConditions">Actual script &!lt;= 10</div>
					</div>
				</div>
				<div class="conditionCoderTuto">
					<span>How to use...</span>
					<br>
					<span>Type a condition using this:</span>
					<div class="markers">
						<span><b>no marker</b><br />Item type<br /><i>"BARREL"</i></span>
						<span><b>"!" marker</b><br />Material of item<br /><i>":WILLOW"</i></span>
						<span><b>":" marker</b><br />Item tag<br /><i>":EMPTY"</i></span>
						<span><b>&gt; &lt; = number</b><br />Target quantity<br /><i>"&lt;20"</i></span>
					</div>

					<span>Write one condition per line. Examples:</span>

					<div class="exemples">
						<div class="exemple">
							<div class='code'>20</div>
							<div class="txt"><i>Just the number: Keeps producing until theres *20* units of the item</i>
							</div>
						</div>

						<div class="exemple">
							<div class='code'>boulder :eco >= 15 </div>
							<div class="txt"><i>The order may start if at least 15 available *non-valuable*
									*boulders*</i>
							</div>
						</div>

						<div class="exemple">
							<div class='code'>:empty :food >10</div>
							<div class="txt"><i>The order may start if more than 10 available *empty* *food-storage*
									items</i>
							</div>
						</div>

						<div class="exemple">
							<div class='code'>spear !iron &lt; 20</div>
							<div class="txt"><i>The order may start if less than 20 *iron* *spears* are available</i>
							</div>
						</div>
					</div>
				</div>

				<div class="buttons newOrder">
					<button id="prodOneTime" onclick="SaveSimpleOrder()">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M600-80v-80h160v-400H200v160h-80v-320q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H600ZM320 0l-56-56 103-104H40v-80h327L264-344l56-56 200 200L320 0ZM200-640h560v-80H200v80Zm0 0v-80 80Z" />
							</svg>
						</span>
						<span class='txt'>ADD ONE-TIME<br><span class="keyInfo">SHIFT+ENTER</span></span>
					</button>
					<button id="prodRepeat" onclick="SaveDailyOrder()">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M200-640h560v-80H200v80Zm0 0v-80 80Zm0 560q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v227q-19-9-39-15t-41-9v-43H200v400h252q7 22 16.5 42T491-80H200Zm520 40q-83 0-141.5-58.5T520-240q0-83 58.5-141.5T720-440q83 0 141.5 58.5T920-240q0 83-58.5 141.5T720-40Zm67-105 28-28-75-75v-112h-40v128l87 87Z" />
							</svg>
						</span>
						<span class='txt'>ADD REPEATING<br> <span class="keyInfo">CTRL+ENTER</span></span>
					</button>
					<button id="prodCancel" onclick="CloseOrderEditor()">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448ZM480-480Z" />
							</svg>
						</span>
						<span class='txt'>Cancel/Close<br><span class="keyInfo">ESC</span></span>
					</button>
				</div>

				<div class="buttons oldOrder">
					<button id="prodOneTime" onclick="SaveSimpleOrder()">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M600-80v-80h160v-400H200v160h-80v-320q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H600ZM320 0l-56-56 103-104H40v-80h327L264-344l56-56 200 200L320 0ZM200-640h560v-80H200v80Zm0 0v-80 80Z" />
							</svg>
						</span>
						<span class='txt'>SAVE<br><span class="keyInfo">SHIFT/CTRL+ENTER</span></span>
					</button>
					<button id="prodCancel" onclick="CloseOrderEditor()">
						<span class='ico'>
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
								<path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448ZM480-480Z" />
							</svg>
						</span>
						<span class='txt'>Cancel/Close<br><span class="keyInfo">ESC</span></span>
					</button>
				</div>

			</div>
		</div>

		<div class="conditionEditor hidden" onclick="event.stopPropagation();">
			<div class="background"> </div>
			<div class='window'>
				<h3 id="conditionEditorTitle">Production Condition</h3>
				<label for="itemType"> <span>Item</span> <input onchange="ConditionEdited(this)" pickOnBlur="1" tagsMode="1" type="text" id="itemType" onfocus="SetAutoFill(this,Object.values(gm.item_types))" property="item_type" onblur="CloseAutoFill(this);" />
					<div class="autocompleteList"></div>
				</label>
				<label for="itemFlag"><span>Flag</span><input onchange="ConditionEdited(this)" pickOnBlur="1" tagsMode="1" type="text" id="itemFlag" onfocus="SetAutoFill(this,gm.itemFlags,true)" property="flags" onblur="CloseAutoFill(this);" />
					<div class="autocompleteList"></div>
				</label>
				<label for="itemMaterial"><span>Material</span><input onchange="ConditionEdited(this)" pickOnBlur="1" tagsMode="1" type="text" id="itemMaterial" onfocus="SetAutoFill(this,Object.values(gm.materials))" property="material" onblur="CloseAutoFill(this)" />
					<div class="autocompleteList"></div>
				</label>
				<label for="itemReactable"><span>Reaction</span><input onchange="ConditionEdited(this)" pickOnBlur="1" tagsMode="1" type="text" id="itemReactable" onfocus="SetAutoFill(this,Object.keys(gm.reactions))" property="reaction_product" onblur="CloseAutoFill(this)" />
					<div class="autocompleteList"></div>
				</label>

				<label for="operator"><span>Comparison</span>
					<select id="operator" onchange="ConditionEdited(this)" property="condition">
						<option value="LessThan">&lt;</option>
						<option value="AtMost">&lt;=</option>
						<option value="Exactly">==</option>
						<option value="Not">!=</option>
						<option value="AtLeast">&gt;=</option>
						<option value="GreaterThan">&gt;</option>
					</select>
					<input type="number" id="conditionValue" value="0" onchange="ConditionEdited(this)" property="value" />
				</label>

				<div class="buttons">
					<button onclick="CloseConditionEditor()">Close<br><span class="keyInfo">ESC</span></button>
				</div>

			</div>
		</div>

	</div>


	<div class='orderToolZone hidden' id="orderToolsTemplate">
		<button class="rowTool btnToggleMe" onclick="OrderToolStopMe();event.stopPropagation()" title="Pause/Resume this task">
			<div><span>‚èπ</span></div><span class="keyInfo">SP</span>
		</button>
		<button class="rowTool btnStopAllAfter" onclick="OrderToolStopAllAfter();event.stopPropagation()" title="Pause/resume this and all tasks after it">
			<div><span>‚èπ‚áì</span></div><span class="keyInfo">^SP</span>
		</button>
		<button class="rowTool btnDuplicate" onclick="OrderToolDuplicate();event.stopPropagation()" title="Duplicate this task">
			<div><span>‚ßâ</span></div><span class="keyInfo">D</span>
		</button>
		<button class="rowTool btnMax " onclick="OrderToolMax();event.stopPropagation()" title="Move this task to the top">
			<div><span>‚áà</span></div><span class="keyInfo">V</span>
		</button>
		<button class="rowTool btnMin " onclick="OrderToolMin();event.stopPropagation()" title="Move this task to the bottom">
			<div><span>‚áä</span></div><span class="keyInfo">B</span>
		</button>
		<button class="rowTool btnDelete" onclick="OrderToolDelete();event.stopPropagation()" title="Delete this task">
			<div><span>‚úñ</span></div><span class="keyInfo">X</span>
		</button>
	</div>

	<div class='disclaimer hidden'>
		<div class="bg"></div>
		<div class="content">
			<h1>Info & Disclaimer</h1>
			<div>
				<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
					<path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
				</svg>
				<div>
					<p>This tool <b>relies on the clipboard</b> to get data from Dwarf Fortress.</p>
					<p>Expect <b>perturbations with copy/paste functions</b> while its running.</p>
					<p>You should still be able to use clipboard functionality by using CTRL+C/copy multiple times.</p>
					<p>To reduce trouble, disable the "Auto-refresh" options and rely on manual reads/writes.</p>
				</div>
			</div>
			<div>
				<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
					<path d="m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z" />
				</svg>
				<div>
					<p><b><span>TL;DR: Its not supposed to break your game,</span> <span>but it could ¬Ø\_(„ÉÑ)_/¬Ø</span></b></p>
					<p> DFPOM is a fan-made tool, not affiliated with Dwarf Fortress/Bay 12 or the DFHack team. </p>
					<p> This tool requires DFHack to be installed and running alongside Dwarf Fortress. </p>
					<p> Always back up your game data before using third-party tools. Use this tool at your own risk. </p>
					<p> For support, updates, and more information, go to the GitHub repo: <a onclick="OpenLink('https://github.com/GitAlbino/df-pom')">GitAlbino/df-pom</a> </p>
				</div>
			</div>

			<div class="buttons">
				<button onclick="CloseDisclaimer()">OK</button>
			</div>
		</div>
	</div>

	<div class='changelog hidden'>
		<div class="bg"></div>
		<div class="content">
			<h1>Changelog</h1>
			<div class="versions">
			</div>

			<div class="buttons">
				<button onclick="CloseChangelog()">OK</button>
			</div>
		</div>
	</div>

	<div class='updateInfo hidden'>
		<div class="bg"></div>
		<div class="content">
			<h1>Update available!</h1>
			<div class="content">
				<p><b>A new version has been detected!</b></p>
				<p>Download started.</p>
				<p>DF-Pom will restart automatically when the update is ready.</p>
				<p>To disable automatic updates, go to the Settings tab.</p>
			</div>

			<div class="buttons">
				<button onclick="CloseUpdateInfo()">OK</button>
			</div>
		</div>
	</div>

	<div class='bottomLine'>
		<div class="help">
			<span>?</span>
			<div class="infos">
				<div><b>DFPOM <ver></ver></b> - <b>D</b>warf <b>F</b>ortress <b>P</b>roduction <b>O</b>rders <b>M</b>anager</div>
				<div>Licensed under the Creative Commons Attribution-NonCommercial 4.0 International License.</div>
				<div>By Yatta/Albino - <a href='https://discord.gg/VgRNVdd3UB'>Discord</a>: yattaalbino - <a onclick="OpenLink('mailto:mappa.yatta@gmail.com')">mappa.yatta@gmail.com</a></div>
				<div>Git: <a onclick="OpenLink('https://github.com/GitAlbino/df-pom')">GitAlbino/df-pom</a></div>
				<div>Huge thanks to the DFHack team for their work, and to the DFHack community/discord (SilasD, Quietust, rome of oxtrot...) for their patient, reactive and insightful help.</div>
				<div>Background illustration by AI :|</div>
				<div><a onclick="ShowChangelog()">Changelog</a></div>
				<div><a onclick="ShowDisclaimer()">Disclaimer</a></div>
			</div>
		</div>
		<div>
			<a class='kofi' onclick="OpenLink('https://ko-fi.com/J3J74D67O')" target="_blank" title="Support DFPOM development on Ko-fi">
				<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
					<path d="M160-120v-80h640v80H160Zm160-160q-66 0-113-47t-47-113v-400h640q33 0 56.5 23.5T880-760v120q0 33-23.5 56.5T800-560h-80v120q0 66-47 113t-113 47H320Zm0-80h240q33 0 56.5-23.5T640-440v-320H240v320q0 33 23.5 56.5T320-360Zm400-280h80v-120h-80v120ZM320-360h-80 400-320Z" />
				</svg>
				<span>Support this!</span>
			</a>
		</div>
		<div>
			| DFPOM version
			<ver></ver>
		</div>
		<div>
			| <a onclick="OpenLink('https://discord.gg/VgRNVdd3UB')"><b>DF-Pom Discord</b> for help/suggestions</a>
		</div>

	</div>

	<div class='pleaseWait'>
		<div>Loading data...</div>
	</div>

</body>

</html>